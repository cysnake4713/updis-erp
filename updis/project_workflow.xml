<?xml version="1.0"?>
<openerp>
	<data>
		<record model="workflow" id="wkf_up_project">
			<field name="name">项目启动流程</field>
			<field name="osv">project.project</field>
			<field name="on_create">True</field>
		</record>
		<!-- Activities -->
		<!-- <record id="act_draft" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="flow_start">True</field>
			<field name="name">draft</field>
			<field name="kind">dummy</field>			
		</record> -->
		<record id="act_tianshenqingdan" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="name">任意人员填写申请单</field>
			<field name="flow_start">True</field>
			<field name="kind">function</field>
			<field name="action">write({'state':'tianshenqingdan'})</field>
		</record>
		<record id="act_suozhangshenpi" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="name">所长审批申请单</field>
			<field name="kind">function</field>
			<field name="action">write({'state':'suozhangshenpi'})</field>
		</record>
		<record id="act_zhidingbumen" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="name">经营室指定设计部门</field>
			<field name="kind">function</field>
			<field name="action">write({'state':'zhidingbumen'})</field>
		</record>
		<record id="act_zhidingfuzeren" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="name">总师室指定负责人</field>
			<field name="kind">function</field>
			<field name="action">write({'state':'zhidingfuzeren'})</field>
		</record>
		<record id="act_suozhangqianzi" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="name">所长签字</field>
			<field name="kind">function</field>
			<field name="action">write({'state':'suozhangqianzi'})</field>
		</record>
		<record id="act_fuzerenqidong" model="workflow.activity">
			<field name="wkf_id" ref="wkf_up_project" />
			<field name="name">项目启动</field>
			<field name="kind">function</field>
			<field name="action">write({'state':'fuzerenqidong'})</field>
		</record>
		<!-- Transitions -->
		<record id="t1" model="workflow.transition">
			<field name="act_from" ref="act_tianshenqingdan"/>
			<field name="act_to" ref="act_suozhangshenpi"/>
			<field name="trigger_model">project.review.suozhangshenpi.form</field>
			<field name="trigger_expr_id">suozhangform_get()</field>
			<field name="condition">test_suozhangform_accepted()</field>
		</record>		
		<record id="t3" model="workflow.transition">
			<field name="act_from" ref="act_suozhangshenpi"/>
			<field name="act_to" ref="act_zhidingbumen"/>
			<field name="trigger_model">project.review.jingyingshishenpi.form</field>
			<field name="trigger_expr_id">jingyingshishenpi_get()</field>
			<field name="condition">test_jingyingshishenpi_accepted()</field>
		</record>		
		<record id="t5" model="workflow.transition">
			<field name="act_from" ref="act_zhidingbumen"/>
			<field name="act_to" ref="act_zhidingfuzeren"/>
			<field name="signal">project_zhidingfuzeren</field>
		</record>		
		<record id="t7" model="workflow.transition">
			<field name="act_from" ref="act_zhidingfuzeren"/>
			<field name="act_to" ref="act_suozhangqianzi"/>
			<field name="signal">project_suozhangqianzi</field>
		</record>		
		<record id="t9" model="workflow.transition">
			<field name="act_from" ref="act_suozhangqianzi"/>
			<field name="act_to" ref="act_fuzerenqidong"/>
			<field name="signal">project_fuzerenqidong</field>
		</record>
	</data>
</openerp>