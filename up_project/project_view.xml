<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
        <record id="project.open_view_project_all" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="domain">[]</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="project.view_project"/>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to start a new project.
                </p>
                <p>
                    Projects are used to organize your activities; plan
                    tasks, track issues, invoice timesheets. You can define
                    internal projects (R&amp;D, Improve Sales Process),
                    private projects (My Todos) or customer ones.
                </p>
                <p>
                    You will be able collaborate with internal users on
                    projects or invite customers to share your activities.
                </p>
            </field>
        </record>


        <record id="project_assignment_search" model="ir.ui.view">
            <field name="name">project.assignment.search</field>
            <field name="model">project.assignment</field>
            <field name="arch" type="xml">
                <search string="Project Assignment">
                    <field name="project_id" string="Project"/>
                    <field name="duty_id" string="Duty"/>
                    <field name="profession_id" string="Profession"/>
                    <group expand="0" string="Group By...">
                        <filter string="Project" icon="terp-folder-orange" domain=""
                                context="{'group_by':'project_id'}"/>
                        <filter string="Profession" icon="terp-folder-orange" domain=""
                                context="{'group_by':'profession_id'}"/>
                        <filter string="Duty" icon="terp-folder-orange" domain="" context="{'group_by':'duty_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        <record id="project_assignment_form" model="ir.ui.view">
            <field name="name">project.assignment.form</field>
            <field name="model">project.assignment</field>
            <field name="arch" type="xml">
                <form version="7.0" string="Project Assignment Form">
                    <group col="4">
                        <field name="duty_id"/>
                        <field name="profession_id"/>
                        <field name="project_id"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="project_assignment_tree" model="ir.ui.view">
            <field name="name">project.assignment.tree</field>
            <field name="model">project.assignment</field>
            <field name="arch" type="xml">
                <tree string="项目分工">
                    <field name="duty_id"/>
                    <field name="profession_id"/>
                    <field name="project_id"/>
                </tree>
            </field>
        </record>
        <record id="edit_updis_project" model="ir.ui.view">
            <field name="name">project.project.updisform</field>
            <field name="model">project.project</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <form string="Project" version="7.0">
                    <header>
                        <button name="action_suozhangshenpi" string="所长审批申请单" states="open" type="object"/>
                        <button name="action_jingyingshishenpi" string="经营室审批申请单" states="suozhangshenpi"
                                type="object"/>
                        <button name="action_zongshishishenpi" string="总师室审批申请单" states="zhidingbumen" type="object"/>
                        <button name="action_suozhangqianzishenpi" string="所长签字审批申请单" states="zhidingfuzeren"
                                type="object"/>
                        <button name="action_fuzerenqidong" string="负责人启动" states="suozhangqianzi" type="object"/>
                        <field name="state" widget="statusbar" statusbar_colors='{"open":"blue"}' readonly="1"/>
                    </header>
                    <sheet string="Project">
                        <field name="analytic_account_id" invisible="1" required="0"/>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Project Name"/>
                            <h1>
                                <field name="name" string="Project Name"/>
                            </h1>
                            <div name="options_active">
                                <field name="use_tasks" class="oe_inline" invisible="1"/>
                                <label for="use_tasks" invisible="1"/>
                            </div>
                        </div>
                        <div class="oe_right oe_button_box" name="buttons" groups="base.group_user">
                            <button name="%(project.act_project_project_2_project_task_all)d" string="Tasks"
                                    type="action" attrs="{'invisible':[('use_tasks','=', 0)]}"/>
                            <button name="attachment_tree_view" string="Documents" type="object"/>
                        </div>
                        <group>
                            <group col="4">
                                <field name="country_id" class="oe_no_button" on_change="onchange_country(country_id)"
                                       options="{'no_open':True}"/>
                                <field name="state_id" class="oe_no_button" options="{'no_open':True}"/>
                                <field name="city"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="edit_project_inherit" model="ir.ui.view">
            <field name="name">project.project.form.replace</field>
            <field name="model">project.project</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <form string="Project" version="7.0">
                    <header>
                        <button name="action_suozhangshenpi" string="提交所长审批" states="open" type="object"/>
                        <button name="action_jingyingshishenpi" string="经营室审批申请单" states="suozhangshenpi"
                                type="object"/>
                        <button name="action_zongshishishenpi" string="总师室审批申请单" states="zhidingbumen" type="object"/>
                        <button name="action_suozhangqianzishenpi" string="所长签字审批申请单" states="zhidingfuzeren"
                                type="object"/>
                        <button name="action_fuzerenqidong" string="负责人启动" states="suozhangqianzi" type="object"/>
                        <field name="state" widget="statusbar" statusbar_colors='{"open":"blue"}' readonly="1"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Project Name"/>
                            <h1>
                                <field name="name" string="Project Name"/>
                            </h1>
                        </div>
                        <div class="oe_right oe_button_box" name="buttons" groups="base.group_user">
                            <button name="%(project.act_project_project_2_project_task_all)d" string="Tasks"
                                    type="action"/>
                            <button name="attachment_tree_view" string="Documents" type="object"/>
                        </div>
                        <group>
                            <group col="4" colspan="4">
                                <field name="xiangmubianhao" readonly="1"/>
                            </group>
                            <group col="4" colspan="4">
                                <label string="Project Location" for="country_id"/>
                                <field name="country_id" class="oe_no_button" widget="selection"
                                       on_change="on_change_country(country_id)"
                                       options="{'no_open':True}" nolabel="1" placeholder="Country"/>
                                <field name="state_id" widget="selection" options="{'no_open':True}" placeholder="State"
                                       nolabel="1"/>
                                <field name="city" nolabel="1" placeholder="City"/>
                            </group>
                            <group name="basic_info" string="Basic Info" colspan="2" col="4">
                                <field name="partner_id" on_change="onchange_partner_id(partner_id)"
                                       domain="[('is_company','=',True)]"/>
                                <field name="customer_contact"/>
                                <field name="guimo"/>
                                <field name="user_id" string="Project Manager"
                                       attrs="{'readonly':[('state','in',['close','cancelled'])],'invisible':[('state','not in',['fuzerenqidong'])]}"/>
                            </group>
                            <newline/>
                            <newline/>
                            <group string="Review">
                                <field name="yaoqiuxingchengwenjian"/>
                                <field name="hetongyizhi"/>
                            </group>
                            <newline/>
                            <group string="设计要求是否达到规定">
                                <field name="express_requirement"/>
                                <field name="yinhanyaoqiu"/>
                                <field name="difangfagui"/>
                                <field name="fujiayaoqiu"/>
                            </group>
                            <group string="Attachment">

                            </group>
                            <group string="本院是否有能力满足规定要求">
                                <field name="ziyuan"/>
                                <field name="shebei"/>
                                <field name="gongqi"/>
                                <field name="shejifei"/>
                            </group>
                           <separator string="Workflow Actions" colspan="4"/>
                            <group string="=======================">
                                <group string="基本信息">
                                    <field name="jianyishejibumen_id"/>
                                    <field name="jianyixiangmufuzeren_id"/>
                                    <field name="jiafang_id"/>
                                    <field name="waibao"/>
                                    <field name="shizhenpeitao"/>
                                    <field name="duofanghetong"/>
                                    <field name="shifoutoubiao"/>
                                </group>
                                <group string="经营室指定设计部门">
                                    <field name="pingshenfangshi"/>
                                    <field name="yinfacuoshi"/>
                                    <field name="renwuyaoqiu"/>
                                    <field name="chenjiebumen_id"/>
                                </group>
                                <group string="总师室指定项目负责人">
                                    <field name="toubiaoleibie"/>
                                    <field name="guanlijibie"/>
                                    <field name="chenjiefuzeren_id"/>
                                    <field name="zhuguanzongshi_id"/>
                                </group>
                                <newline/>
                                <group colspan="4">
                                    <field name="gongzuodagang"/>
                                    <field name="chuangyouxiangmu"/>
                                    <field name="zhuantihuozixiang"/>
                                    <field name="youfenbaofang"/>
                                    <field name="categories_id"/>
                                    <field name="assignment_ids"/>
                                </group>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
    </data>
</openerp>
